$(function(){var i=[],n=[],a=[],l=$("#DotW").val(),r=$("#time").val();$("#submit").on("click",function(e){e.preventDefault(),$.getJSON("/data",function(e){Object.keys(e).map(function(n){for(var a in e[n]){for(var t=e[n][a][l][r],o=e[n][a].size,f=19.5-r,u=0;f>=u;u+=.5){var v=r+u;if(e[n][a][l][v]){var c=v;u=f+1}else if(u=f)var c="20"}t||i.push([n,a,o,c])}});for(var t=i.length,o=0;t>o;o++)n.push(i[o][0]);$.each(n,function(i,n){-1===$.inArray(n,a)&&a.push(n)});for(var f=a.length,o=0;f>o;o++){var u=a[o];console.log("<li id='"+u+"'>"+u+"</li>"),$("#buildings").append("<li id='"+u+"' class='building'>"+u+"</li>")}})}),$("#")});